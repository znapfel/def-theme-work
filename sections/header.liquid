{% schema %}
    {
        "name": "Header",
        "settings": [
            {
             "id": "primary_link_list",
             "type": "link_list",
             "label": "Primary Navigation Menu",
             "default": "main-menu"
            }
        ]
    }
{% endschema %}
<!-- Store Name / Logo -->

<h1 class="logo"><a href="/">{{ shop.name | escape }}</a></h1>
<input type="checkbox" id="nav-toggle" class="header--nav-toggle">
<nav>
    {%- assign primary_link_list = linklists[section.settings.primary_link_list] -%}
    {%- unless primary_link_list == blank -%}
    <!-- Main Nav Links -->
    <ul class="header--main-menu-navigation">
        {%- for link in primary_link_list.links -%} 
            {%- assign child_link_list_handle = link.title | handle -%}
            {%- assign child_link_list = linklists[child_link_list_handle] -%}

            {%- if child_link_list and child_link_list.links.size > 0 -%}
                {%- assign has_child_link_list = true -%}

            {%- else -%}

                {%- assign has_child_link_list = false -%}
            
            {%- endif -%}
        <li class="header--main-menu-link {% if link.active %} active {% endif %} {% if has_child_link_list %} header--dropdown {% endif %}">
            <a href="{{ link.url }}" class="nav-link {% if has_child_link_list %}dropdown-toggle{% endif %}">{{ link.title | escape }}</a>
            {% if has_child_link_list %}
                <div class="header--dropdown-menu" aria-labelledby="{{ child_link_list_handle }}-dropdown-toggle">
                    {%- for child_link in child_link_list.links -%}
                        <a href="{{ child_link.url }}" class="header--dropdown-item">{{ child_link.title | escape }}</a>
                    {%- endfor -%}
                </div>
            {% endif %}
        </li>
        {%- endfor -%}
    </ul>
    {%- endunless -%}

    <!-- Search and Login Links (if accounts are enabled)-->
    <ul class="header--accounts">
        <li class="header--nav-item">
            <a href="header--nav-link" href="/search">Search</a>
        </li>
        {%- if shop.customer_accounts_enabled -%}
            {%- if customer -%}
                <li>
                    <a href="/account">{{ customer.first_name | escape }}</a>
                </li>
            {%- else -%}
                <li>
                    <a href="account/login">Log In</a>
                </li>
            {%- endif -%}
        {%- endif -%}
    <!-- Cart Link and Quantity -->
        <li class="header--cart">
            <a href="/cart">Cart ({{ cart.item_count }})</a>
        </li>
    </ul>

</nav>
<label for="nav-toggle" class="header--nav-toggle-label">
    <span></span>
</label>